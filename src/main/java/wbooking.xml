<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wbookingns">
	<resultMap type="wbooking" 		id="wbookingResult">
		<result property="bk_no" 		column="bk_no" />
		<result property="mbd_no" 		column="mbd_no" />
		<result property="bk_mc_chk" 	column="bk_mc_chk" />
		<result property="bk_chk" 		column="bk_chk" />
		<result property="wkr_reg_no" 	column="wkr_reg_no" />
		<result property="wkr_id" 		column="wkr_id" />
		<result property="mbd_sbjt" 	column="mbd_sbjt" />
	</resultMap>
	
	<!-- 아이디 값 임의로 입력해 두었으니, 세션 테스트할 때 꼭 바꿀 것. -->
	<select id="list" parameterType="hashMap" resultMap="wbookingResult">
		select * from (select rowNum rn, e.* from (select distinct b.bk_no, b.mbd_no, m.mbd_sbjt, b.bk_mc_chk, b.bk_chk from booking b, 
		mboard m where m.mbd_no=b.mbd_no and b.wkr_id='TEST4' order by mbd_no desc, bk_no desc) e) 
		where rn between #{startRow} and #{endRow}
	</select>
	
	<select id="total" resultType="int"> 
		select count(*) from booking
	</select>
	
</mapper>